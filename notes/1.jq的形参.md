整个 jq 的源代码都包含在一个立即执行的匿名函数中

```
(function(window,undefined){
  ...
})(window)
```

匿名函数的好处是把代码块中所有的变量都变成局部变量，避免对全局变量的污染，导致代码冲突

该匿名函数有两个参数 window 和 undefined,为什么要将 window 和 undefined 作为参数传给它？

```
(function( $, undefined ) {})(jQuery); // 同理
```

因为 ECMAscript 执行 JS 代码是从里到外的，因此把全局变量 window 或 jQuery 对象传进来，避免去外层寻找，提高效率。undefined 在老一辈的浏览器是不被支持的，直接使用会报错，js 框架要考虑到兼容性，因此增加一个形参 undefined。

还有，不要使用 window.undefined 传递形参，有可能 window.undefined 被其他人修改了,最好就是什么都不传，形参的 undefined 就是真正的 undefined 了。

代码：

```
var undefined = 10;
(function(window){
  console.log(window.undefined); // 10
  console.log(undefined); // 10
})()
```

与代码：

```
var undefined = 10;
(function(window,undefined){
  console.log(window.undefined); // 10
  console.log(undefined); // undefined ,此处undefined参数为局部的名称为undefined变量，值为undefined
})()
```

区分上述两种方式：第一种每个语句都要去最外层全局找一次 window。第二种将 window 作为参数传递过去，不用每个语句都去最外层全局找一次 window，提高了效率；加入要在函数中为 window 再设置 n 个属性，只需要去最外层找一次 window 对象。第二种代码中的 undefined，就算有其他人把外层的 undefined 定义了，函数里面的 undefined 依然不受影响。最大程度的防止外界的变量定义对所做封装的内部造成影响。

```
(function( $, undefined ) {})(jQuery); // 同理
```

例如

```
var undefined = 100;
(function($,undefined){
  // code
})(jQuery)
```

这里传一个 undefined 的形参，避免上面的外层定义，只要没有传值进入函数，unddefined 就不会被赋值
